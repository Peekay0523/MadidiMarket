{% extends 'marketplace/base.html' %}
{% load static %}

{% block title %}Set New Password - Madidi Market{% endblock %}

{% block content %}
<div class="container mx-auto px-4 max-w-md">
    <h1 class="text-3xl font-bold mb-8 text-center">Set New Password</h1>

    <div class="card">
        {% if valid_token %}
            <form method="post">
                {% csrf_token %}
                
                <div class="mb-4">
                    <label for="new_password1" class="block text-gray-700 mb-2">New Password</label>
                    <input type="password" name="new_password1" id="new_password1" class="form-input w-full" required>
                </div>

                <div class="mb-6">
                    <label for="new_password2" class="block text-gray-700 mb-2">Confirm New Password</label>
                    <input type="password" name="new_password2" id="new_password2" class="form-input w-full" required>
                </div>

                <button type="submit" class="btn-primary w-full py-3">Reset Password</button>
            </form>
        {% else %}
            <div class="text-center">
                <h2 class="text-xl font-semibold text-red-600 mb-4">Invalid Link</h2>
                <p class="text-gray-700 mb-6">
                    The password reset link is invalid, possibly because it has already been used.
                    Please request a new password reset.
                </p>
                <a href="{% url 'marketplace:password_reset' %}" class="btn-primary w-full py-3">Request New Reset Link</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}